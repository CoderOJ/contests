# 独木桥 (bridge)

(2s / 256MB)

## 题目描述

刚接触 OI 的你，大概会接触到一道叫做[独木桥](https://www.luogu.com.cn/problem/P1007)的题目。

现在随着城市发展，独木桥已经架成了网格桥。具体地，现在有一张大小为 $w \times h$ 的网格图，左下角为 $(0, 0)$，右上角为 $(w, h)$。

有 $n$ 个人准备过桥。这些人分为两类：

- 一类人起点在最左侧（初始坐标形如 $(0, y)$），初始方向为水平向右；
- 一类人起点在最下侧（初始坐标形如 $(x, 0)$），初始方向为竖直向上。

![graph.png](https://i.loli.net/2020/11/22/FirblzNBM9I4LkZ.png)

第 $i$ 个人的出发时间为 $t_i$（即，第 $i$ 个人在 $t_i$ 时刻会出现在网格的最左端或最下端）；每个人在一个单位时间内会走过 $1$ 的距离。

然而这群人还是保留了独木桥时的习惯：当两个人在同一点相遇时，它们会立即交换它们的方向，形如下图：

![turn.png](https://i.loli.net/2020/11/22/MhVo8gXtbJpZCBk.png)

保证没有两个人的起始位置和出发时间相同。

所有人在抵达最右端或最上端时（横坐标为 $w$ 或纵坐标为 $h$ 时）会停止走路。求每个人最终抵达的地点。

## 输入格式

第一行三个正整数 $n, w, h$，表示要过桥的人数、网格的长度和宽度。

接下来 $n$ 行，每行三个正整数 $\text{op}, p, t$，

- 若 $\text{op} = 1$，则此人会在 $t$ 时刻从 $(0, p)$ 出发向右走；
- 若 $\text{op} = 2$，则此人会在 $t$ 时刻从 $(p, 0)$ 出发向上走。

## 输出格式

共 $n$ 行，每行两个正整数，表示每个人最终到达的坐标。

### 样例输入 #1

```
7 10 7
1 6 2
1 5 3
1 5 0
1 2 0
2 2 0
2 4 0
2 7 2
```

### 样例输出 #2

```
4 7
2 7
7 7
10 5
10 2
10 6
10 5
```

### 样例解释

见下发文件 `bridge/*.png`，文件名中的数代表此时的 $t$，图中的红色箭头表示点在此时的方向。

### 其他样例

见下发文件 `bridge/ex_bridge1.*`、`bridge/ex_bridge2.*`。

## 数据范围

对于 $10\%$ 的数据，满足 $n, w, h, t \le 5$；

对于 $40\%$ 的数据，满足 $n \le 200$；

另有 $5\%$ 的数据，满足 $\text{op}$ 始终为 $1$ 或始终为 $2$；

对于 $100\%$ 的数据，满足 $1 \le n \le 10^5, 2 \le w, h \le 10^9, \text{op} \in \{1, 2\}, 0 \le t \le 10^9$，

$\text{op} = 1$ 时，$1 \le p \le h - 1$；$\text{op} = 2$ 时，$1 \le p\le w - 1$。

